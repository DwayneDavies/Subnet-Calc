function blankTable(){document.querySelector("#networkList").querySelectorAll("*").forEach(a=>a.remove())}function validate(){let b=document.querySelector("#ipAddressInput"),d=b.value,c=document.querySelector("#cidrSelect"),a=c.value,e=isIPv4Address(d),f=isCidr(a),g=document.querySelector("#ipError"),h=document.querySelector("#cidrError");e&&f?(b.style.borderColor="#003366",c.style.borderColor="#003366",g.style.display="none",h.style.display="none",localStorage.setItem("ipAddress",b.value),localStorage.setItem("cidr",a),a=a.substring(0,2),blankTable(),process(d,a)):(invalidateInput(b,e,g),invalidateInput(c,f,h))}function invalidateInput(a,c,b){c?(a.style.border="2px solid #003366",b.style.display="none"):(a.style.border="2px solid red",b.style.display="block")}function isCidr(a){return"Select CIDR/Subnet value"!=a}function process(f,a){let b=displayNetwork(f,a),d=getWildcardMask(a),g=getHostBits(a),e=countHosts(g),c=getBroadcast(b,d);document.querySelector("#networkAddress").innerHTML=b,document.querySelector("#subnetMask").innerHTML=getSubnetMask(a),document.querySelector("#wildcardMask").innerHTML=d,document.querySelector("#numNetworks").innerHTML=countNetworks(a).toLocaleString(),document.querySelector("#numAddresses").innerHTML=e.toLocaleString(),32==a?(document.querySelector("#broadcastAddress").innerHTML="N/A",document.querySelector("#numUsuableHosts").innerHTML="1",document.querySelector("#firstHost").innerHTML=b,document.querySelector("#lastHost").innerHTML=b):31==a?(document.querySelector("#broadcastAddress").innerHTML="N/A",document.querySelector("#numUsuableHosts").innerHTML="2",document.querySelector("#firstHost").innerHTML=getLastHost(c),document.querySelector("#lastHost").innerHTML=c):(document.querySelector("#broadcastAddress").innerHTML=c,document.querySelector("#numUsuableHosts").innerHTML=getUsuableHosts(e).toLocaleString(),document.querySelector("#firstHost").innerHTML=getFirstHost(b),document.querySelector("#lastHost").innerHTML=getLastHost(c)),showNetworks(b,d,a)}function getMask(a){return({1:128,2:192,3:224,4:240,5:248,6:252,7:254,0:255})[a]}function mask(a,b){return a&b}function displayNetwork(h,c){let d="",e=h.split("."),f="",a=getOctet(c),i=getSubnetMask(c).split(".");for(let b=0;b<a-1;b++)d+="."+e[b];for(let g=1;g<4-(a-1);g++)f+=".0";return(d+"."+mask(e[a-1],i[a-1])+f).substring(1)}function getOctet(a){return Math.ceil(a/8)}function getHostBits(a){return 32-a}function countHosts(a){return Math.pow(2,a)}function countNetworks(a){return a%8?Math.pow(2,a%8):256}function getUsuableHosts(a){return a-2}function getSubnetMask(a){let b=getOctet(a),c="",d="";for(let e=0;e<b-1;e++)c+="255.";for(let f=1;f<4-(b-1);f++)d+=".0";return c+getMask(a%8)+d}function getWildcardMask(c){let d=getSubnetMask(c),e=d.split("."),b="";for(let a=0;a<4;a++)b+=255-parseInt(e[a])+".";return b.slice(0,-1)}function getBroadcast(c,d){let b="",e=c.split("."),f=d.split(".");for(let a=0;a<4;a++)b+=parseInt(e[a])+parseInt(f[a])+".";return b.slice(0,-1)}function getFirstHost(a){let b=a.lastIndexOf(".");return a.substring(0,b)+"."+(parseInt(a.substring(b+1))+1)}function getLastHost(a){let b=a.lastIndexOf(".");return a.substring(0,b)+"."+(a.substring(b+1)-1)}function isIPv4Address(b){if(!new RegExp(/^(([0-9]{1,3}\.){3}[0-9]{1,3})$/).test(b))return!1;{let c=b.split(".");for(let a of c)if(a.length>1&&"0"===a.charAt(0)||0>parseInt(a,10)||parseInt(a,10)>=256)return!1}return!0}function showNetworks(d,b,e){let c=getOctet(e),f=b.split("."),g=parseInt(f[c-1])+1;for(let a=0;a<256;a+=g)printSubnetRow(d,a,c,b)}function printSubnetRow(j,k,l,d){let g=j.split("."),a="",c="",b="",m=document.querySelector("#networkList"),h=document.createElement("tr"),e,i;document.querySelector("#networkListTable").style.display="block",g[l-1]=k,a=g.join("."),h.classList.add("table-row"),"0.0.0.0"==d?(b="N/A",c=a):"0.0.0.1"==d?(b="N/A",c=a+" - "+getFirstHost(a)):(b=getBroadcast(a,d),c=getFirstHost(a)+" - "+getLastHost(b));let n=[a,c,b];for(let f=0;f<3;f++)i=m.appendChild(h),(e=document.createElement("td")).classList.add("table-cell"),e.innerHTML=n[f],i.appendChild(e)}function closePopover(){document.querySelector("#popOver").style.display="none",document.querySelector("#aboutSpan").style.display="block"}function showPopover(){document.querySelector("#popOver").style.display="block",document.querySelector("#aboutSpan").style.display="none"}window.onload=function(){let b=document.querySelector("#cidrSelect"),c=document.querySelector("#ipAddressInput"),a=window.localStorage.getItem("ipAddress"),d=localStorage.getItem("cidr");a&&(c.value=a,b.value=d)}